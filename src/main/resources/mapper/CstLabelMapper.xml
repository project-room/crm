<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.crm.biz.customer.dao.CstLabelMapper" >
  <resultMap id="BaseResultMap" type="com.crm.entity.CstLabel" >
    <id column="label_id" property="labelId" jdbcType="INTEGER" />
    <result column="label_name" property="labelName" jdbcType="VARCHAR" />
    <result column="user_id" property="userId" jdbcType="BIGINT" />
    <collection property="customerList" ofType="com.crm.entity.CstCustomer">
      <!--映射的客户表有些问题，这里只映射了客户表的基本信息，但没映射到客户表关联的其他表 -->
      <id column="cust_id" property="custId" jdbcType="BIGINT" />
      <result column="cust_name" property="custName" jdbcType="VARCHAR" />
      <result column="cust_phone" property="custPhone" jdbcType="VARCHAR" />
      <result column="cust_email" property="custEmail" jdbcType="VARCHAR" />
      <result column="cust_company" property="custCompany" jdbcType="VARCHAR" />
      <result column="cust_address" property="custAddress" jdbcType="VARCHAR" />
      <result column="cust_industry" property="custIndustry" jdbcType="VARCHAR" />
      <result column="cust_pic" property="custPic" jdbcType="VARCHAR" />
      <result column="cust_sales" property="custSales" jdbcType="VARCHAR" />
      <result column="user_id" property="userId" jdbcType="BIGINT" />
      <result column="type" property="type" jdbcType="INTEGER" />
    </collection>
  </resultMap>
  <select id="findById" parameterType="Long" resultMap="BaseResultMap">
    SELECT * FROM cst_label WHERE label_id=#{id}
  </select>
  <insert id="addCstLabel" parameterType="CstLabel">
    INSERT INTO cst_label (label_name,user_id)
    VALUES (#{labelName},#{userId})
  </insert>
  <delete id="deleteById" parameterType="Long">
    DELETE FROM cst_label WHERE label_id=#{id}
  </delete>
  <update id="updateCstLabelById" parameterType="CstLabel">
    UPDATE cst_label SET label_name=#{labelName},user_id=#{userId} WHERE label_id=#{label_id}
  </update>
</mapper>